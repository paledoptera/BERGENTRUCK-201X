[gd_scene load_steps=16 format=3 uid="uid://dmxrsb6vf3fo0"]

[ext_resource type="Script" uid="uid://y2icolv1tlef" path="res://Levels/player.gd" id="1_vyvq2"]
[ext_resource type="Texture2D" uid="uid://dwq5gutderyyr" path="res://Levels/Assets/Visuals/car.png" id="2_xeq3v"]
[ext_resource type="Texture2D" uid="uid://cocw50h6ah7c3" path="res://Levels/Assets/Visuals/steering wheel.png" id="3_umq7g"]
[ext_resource type="Texture2D" uid="uid://cvcxfvvfg7qq3" path="res://Levels/Assets/Visuals/gearshift.png" id="4_ln1lg"]
[ext_resource type="Texture2D" uid="uid://bbntqmtppwjx7" path="res://Levels/Assets/Visuals/asgore arm.png" id="5_umq7g"]
[ext_resource type="PackedScene" uid="uid://chgr6wfa8ldsh" path="res://Common/MouseClickWidgets/widget_slider.tscn" id="5_wpukm"]
[ext_resource type="PackedScene" uid="uid://dt46i8eeout7" path="res://Common/MouseClickWidgets/widget_joystick_half.tscn" id="6_yiue1"]
[ext_resource type="Texture2D" uid="uid://bx7udjgnsoknr" path="res://Levels/Assets/Visuals/skybox.png" id="8_ln1lg"]
[ext_resource type="Texture2D" uid="uid://4cb4hag40ex1" path="res://Levels/Assets/Visuals/asgore.png" id="9_wpukm"]

[sub_resource type="CylinderMesh" id="CylinderMesh_ln1lg"]
top_radius = 500.0
bottom_radius = 500.0
height = 400.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_wpukm"]
transparency = 2
alpha_scissor_threshold = 0.5
alpha_antialiasing_mode = 0
cull_mode = 1
shading_mode = 0
albedo_texture = ExtResource("8_ln1lg")
uv1_scale = Vector3(3, 1, 2)
uv1_offset = Vector3(0, -0.635, 0)
uv1_triplanar_sharpness = 0.353554
texture_filter = 0

[sub_resource type="SphereShape3D" id="SphereShape3D_wpukm"]
radius = 1.52588

[sub_resource type="BoxShape3D" id="BoxShape3D_wpukm"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wpukm"]
size = Vector2(337, 20)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yiue1"]
size = Vector2(131, 158)

[node name="Player" type="CharacterBody3D"]
script = ExtResource("1_vyvq2")

[node name="Background" type="MeshInstance3D" parent="."]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0)
top_level = true
visible = false
mesh = SubResource("CylinderMesh_ln1lg")
surface_material_override/0 = SubResource("StandardMaterial3D_wpukm")

[node name="Visuals" type="Sprite2D" parent="."]
position = Vector2(160, 120)
texture = ExtResource("2_xeq3v")
offset = Vector2(0.5, 0)

[node name="SteeringWheel" type="Sprite2D" parent="Visuals"]
position = Vector2(-45, 60)
texture = ExtResource("3_umq7g")

[node name="GearShift" type="Sprite2D" parent="Visuals"]
position = Vector2(81, 94)
texture = ExtResource("4_ln1lg")
offset = Vector2(0, -30)

[node name="AsgoreArm" type="Sprite2D" parent="Visuals"]
z_index = 50
position = Vector2(53, 67)
texture = ExtResource("5_umq7g")
offset = Vector2(0, 87.99)
hframes = 2

[node name="Asgore" type="Sprite2D" parent="Visuals"]
z_index = 999
position = Vector2(-210, -127)
texture = ExtResource("9_wpukm")
centered = false

[node name="WidgetGear" parent="." instance=ExtResource("5_wpukm")]
modulate = Color(0.760784, 0.760784, 0.760784, 0)
offset_left = 198.0
offset_top = 137.0
offset_right = 625.0
offset_bottom = 201.0
scale = Vector2(0.225, 1.5)
snap_speed = 0.9

[node name="DraggableItem" parent="WidgetGear" index="1"]
scale = Vector2(1.62, 0.5)

[node name="Marker2D" type="Marker2D" parent="WidgetGear"]
position = Vector2(32, 32)

[node name="Marker2D3" type="Marker2D" parent="WidgetGear"]
position = Vector2(213.5, 32)

[node name="Marker2D2" type="Marker2D" parent="WidgetGear"]
position = Vector2(427, 32)

[node name="WidgetWheel" parent="." instance=ExtResource("6_yiue1")]
modulate = Color(1, 1, 1, 0)
position = Vector2(116, 191)
scale = Vector2(0.5, 0.54)
drag_speed = 0.1
snap_speed = 0.05

[node name="Marker2D" parent="WidgetWheel/Notches" index="0"]
position = Vector2(0, -150)

[node name="DraggableItem" parent="WidgetWheel" index="3"]
position = Vector2(0, -150)

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.939693, 0.34202, 0, -0.34202, 0.939693, 0, 5, 0)
keep_aspect = 0
current = true
fov = 100.0
size = 0.075
near = 0.1

[node name="Area3D" type="Area3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
transform = Transform3D(0.875616, 0, 0.483007, 0, 1, 0, -0.483007, 0, 0.875616, 0, 4.48697, 0.294868)
shape = SubResource("SphereShape3D_wpukm")
debug_color = Color(0, 1, 0.486275, 0.972549)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.45, 0)
shape = SubResource("BoxShape3D_wpukm")
debug_color = Color(0.941176, 0, 0.619608, 1)

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(0, 284)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(158.5, 0)
shape = SubResource("RectangleShape2D_wpukm")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(-61.5, -69)
shape = SubResource("RectangleShape2D_yiue1")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(387, -69)
shape = SubResource("RectangleShape2D_yiue1")

[connection signal="drag_started" from="WidgetWheel/DraggableItem/MouseDragComponent" to="." method="_steering_wheel_get_y"]
[connection signal="area_entered" from="Area3D" to="." method="_on_area_entered"]

[editable path="WidgetGear"]
[editable path="WidgetWheel"]
[editable path="WidgetWheel/DraggableItem"]
